---

copyright:
  years: 2015, 2018
lastupdated: "2018-07-19"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:tip: .tip}
{:pre: .pre}
{:codeblock: .codeblock}
{:screen: .screen}
{:javascript: .ph data-hd-programlang='javascript'}
{:java: .ph data-hd-programlang='java'}
{:python: .ph data-hd-programlang='python'}
{:swift: .ph data-hd-programlang='swift'}

この文書は、{{site.data.keyword.cloud}} 上の {{site.data.keyword.knowledgestudiofull}} に関するものです。 以前のバージョンの {{site.data.keyword.knowledgestudioshort}} on {{site.data.keyword.IBM_notm}} Marketplace 向けの資料を参照するには、[このリンクをクリック ![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](https://{DomainName}/docs/services/knowledge-studio/typesystem.html){: new_window} してください。
{: tip}

# タイプ・システムの確立
{: #typesystem}

タイプ・システムは、コンテンツにどのようにアノテーションを付けることができるかを制御します。
{: shortdesc}

## タイプ・システム
{: #wks_typesystem}

タイプ・システムは、アノテーションによってラベル付けするドメイン・コンテンツ内の興味あるものを定義します。 タイプ・システムは、ラベル付けできるエンティティーのタイプと、さまざまなエンティティー間の関係にどのようにラベル付けできるかを定義することにより、コンテンツにどのようにアノテーションを付けることができるかを制御します。 通常、モデルのプロセス管理者と対象分野の専門家が協力してタイプ・システムを定義します。

{{site.data.keyword.knowledgestudioshort}} では、タイプ・システムを最初から作成することも、既存のタイプ・システムをアップロードすることもできます。 ワークスペースをジャンプ・スタートさせるためには、類似するドメイン用に作成されたタイプ・システムをアップロードするとよいでしょう。 その後、タイプ・システムを編集して、エンティティー・タイプを追加したり、削除したり、関係タイプを再定義したりすることができます。

{{site.data.keyword.knowledgestudioshort}} のチュートリアルで使用できるよう、*KLUE* タイプ・システムに基づいたサンプルのタイプ・システムが用意されています。 KLUE は Knowledge from Language Understanding and Extraction を意味し、収集されたニュース記事の分析に基づいて、{{site.data.keyword.IBM_notm}} Research によって生成されました。 サンプルの KLUE タイプ・システムは、<a target="_blank" href="https://watson-developer-cloud.github.io/doc-tutorial-downloads/knowledge-studio/en-klue2-types.json" download>ここ <img src="../../icons/launch-glyph.svg" alt="外部リンク・アイコン" title="外部リンク・アイコン" class="style-scope doc-content"></a> からダウンロードできます。

冶金学、地質学、マーケット情報、ライフ・サイエンス、電子カルテ、腫瘍学など、多くの業界から、辞書やドメイン固有の専門用語のオントロジーが発行されています。 その種のリソースを参照して、お客様独自のタイプ・システムで定義するエンティティーのタイプについて着想を得ることを考慮してください。

### メンション
{: #wks_typesystem__wks_typesystemS2}

メンションは、ドメイン・データ内で関連すると考えられるテキストの任意のスパンです。 例えば、自動車に関するタイプ・システムでは、`エアバッグ`、`フォード・エクスプローラー`、および`チャイルド・シート` のような用語の出現個所は、関連するメンションになりえます。

### エンティティー・タイプ
{: #wks_typesystem__wks_typesystemS3}

エンティティー・タイプは、実世界のものをカテゴリー化する方法です。 エンティティー・メンションは、そのタイプの「もの」の 1 つの例です。 例えば、「`オバマ大統領`」というメンションには、`PERSON` (個人) エンティティー・タイプとしてアノテーションを付けることができます。 「`{{site.data.keyword.IBM_notm}}`」というメンションには、`ORGANIZATION` (組織) エンティティー・タイプとしてアノテーションを付けることができます。 多くの場合、エンティティーは名詞ですが、そのタイプ・システムを使用するアプリケーションの目的上、キャプチャーすることが重要な動詞である限り、動詞にすることもできます。 例えば、`EVENT_CRASH (事象_衝突)` は、自動車に関するタイプ・システムに有効なエンティティー・タイプとなる可能性があります。これにより、`The car hit the barrier (車が障害物にぶつかった)` という英語の文章の中で、`hit (ぶつかる)` という単語にアノテーションを付けることができます。

アノテーション・ワークスペースの最終目標は、文書内の個々のメンションに、その「もの」のタイプによってアノテーションを付けることです。 メンションをエンティティー・タイプによって分類した後、そのラベル付けされたテキスト・スパンは、エンティティーとして参照されます。

{{site.data.keyword.knowledgestudioshort}} を使用して作成するタイプ・システムには、以下のエンティティー・タイプ属性を含めることができます。 それらの属性は、テキスト内のメンションを限定するのに役立ちますが、機械学習モデルによってエンティティー・タイプとしてマーク付けされることはありません。 例えば、エンティティー・タイプ `ORGANIZATION` に `COMMERCIAL` (商業) というエンティティー・サブタイプがある場合、`COMMERCIAL` がそれだけでエンティティー・タイプとしてマーク付けされることはありません。

- **役割**

    これは、メンションが出現するコンテキストによってメンションを限定します。 例えば、「`学生たちはフランスに行った`」というステートメント内の「`フランス`」というメンションには、エンティティー・タイプ `GPE`  (地政学的エンティティー) がマーク付けされます。`フランス`が地政学的エンティティーであるからです。 しかし、このコンテキストでの`フランス`は、旅行する学生たちの目的地でもあるため、このエンティティー・タイプは属性 (この場合は `LOCATION` (場所) という役割) を追加することによって限定されます。 別の例として、メンション「`弁護士`」には、エンティティー・タイプ `PEOPLE` (人々) によってマーク付けし、役割 `OCCUPATION` (職業) によってもマーク付けすることができます。

- **エンティティー・サブタイプ**

    これは、エンティティー・タイプをさらに分類します。 例えば、エンティティー・タイプ `ORGANIZATION` (組織) は、サブタイプ `COMMERCIAL` (商業)、`GOVERNMENT` (政府)、`MILITARY` (軍事)、および `EDUCATION` (教育) を含む可能性があります。

- **メンション・タイプ**

    これは、以下の特定の品詞によってメンションを限定します。
    - **NAM**: メンションは、個人の名前や組織の名前など、固有名詞です。
    - **NOM**: メンションは、「*会社*」や「*社長*」など、名詞 (普通名詞) です。
    - **PRO**: メンションは、「*彼*」、「*我々*」、「*それ*」など、代名詞です。
    - **NONE**: 他の 3 つのメンション・タイプのどれにも該当しません。

- **メンション・クラス**

    メンションを、それが特定、総称、否定のいずれであるかを示すことによって限定します。
    - **SPC**: メンションは特定のものであり、多くの場合、英語の「*the*」という単語を含んでいます (「*the book*」や「*the hurricane occurred in September*」など)。 これらの例では、「*book*」や「*hurricane*」のメンションに、属性 **SPC** のアノテーションが付けられます。
    - **GEN**: メンションは、英語の「*a book*」や「*hurricanes usually occur in the fall*」など、総称としてのメンションです。 これらの例では、「*book*」や「*hurricanes*」などのメンションに、属性 **GEN** のアノテーションが付けられます。
    - **NEG**: メンションは、英語の「*no book*」への参照など、否定されています。 モデルをトレーニングするとき、アルゴリズムは否定と肯定の両方の例から学習できるため、両方のタイプのメンションにマーク付けすることが重要です。

### 関係タイプ
{: #wks_typesystem__wks_typesystemS4}

関係タイプは、2 つのエンティティー間における、順序付きの 2 値の関係を定義します。 関係メンションが存在するためには、テキストが明示的にその関係を定義し、2 つのエンティティーのメンション同士をバインドしている必要があり、それを単一の文章の中で行っている必要があります。 例えば、英語で `Mary works for {{site.data.keyword.IBM_notm}}` という文は、`employedBy` (～の被雇用者である) 関係タイプの証明テキストです。

一部の関係タイプでは、エンティティー・メンションの順序が重要です。 例えば、`employedBy` 関係タイプでは、エンティティー・タイプ `PERSON` や `PEOPLE` は関係の中の最初のメンションとして、また、`ORGANIZATION` や **GPE** (地政学的エンティティー) は 2 番目のメンションとして許容されますが、その逆は許容されません。 `Mary` `employedBy` `{{site.data.keyword.IBM_notm}}` は有効な関係ですが、`{{site.data.keyword.IBM_notm}}` `employedBy` `Mary` はそうではありません。`spouseOf` (～の配偶者)、`colleague` (同僚)、`sibling` (兄弟姉妹) など、一部の関係タイプでは、順序は問題になりません。 順序が重要でない関係タイプを定義するときは、その関係タイプの使用方法を正規化するために、アノテーションのガイドラインに情報を追加することをお勧めします。 そのような対称関係を注記するための慣例の 1 つは、テキスト内で最初に出現するエンティティー・メンションを、関係内の最初のメンションとする必要があると述べておくことです。

**関連概念**:

[別のワークスペースからのリソースのアップロード](/docs/services/watson-knowledge-studio/exportimport.html)

## ワークスペースへのタイプ・システムの追加
{: #wks_projtypesys}

アノテーション・タスクを開始する前に、タイプ・システムを作成またはアップロードする必要があります。

### この作業について

タイプ・システム項目には、以下の命名規則が適用されます。

- 名前にスペースを含めることはできません。
- タイプ・システムに追加する値には、次の英数字 ASCII 文字と下線文字のみを使用してください: `A` から `Z`、`a` から `z`、`0` から `9`。
- エンティティー・タイプ名または関係タイプ名の 1 文字目は英字でなければなりません。
- エンティティー・タイプ名の長さは 64 文字を超えることはできません。
- 関係タイプ名の長さは 128 文字を超えることはできません。

慣例として、エンティティー・タイプ名は大文字 (`ORGANIZATION` など) で指定し、関係タイプ名はキャメル・ケース (`employedBy` など) で指定します。 ただし、この慣例はオプションです。

### 手順

1. {{site.data.keyword.knowledgestudioshort}} の管理者またはプロジェクト管理者としてログインし、**「アセット」**>**「エンティティー・タイプ」**ページを開きます。
1. タイプ・システムを作成する方法として、以下のいずれかを選択します。

    - 既存のタイプ・システムをアップロードする:

        1. **「エンティティー・タイプ」**タブで、**「アップロード」**をクリックします。

            以前に {{site.data.keyword.knowledgestudioshort}} ワークスペースからタイプ・システムをダウンロードした場合、そのタイプ・システムは `JSON` 形式でダウンロードされています。 このタイプ・システムをアップロードして、ワークスペースの作成をジャンプ・スタートさせることができます。 詳しくは、『[別のワークスペースからのリソースのアップロード](/docs/services/watson-knowledge-studio/exportimport.html)』を参照してください。

            > **注:** タイプ・システムの起点に関係なく、それに含まれている項目は、前にリストで示した命名規則を満たしている必要があります。

        1. タイプ・システムを最初から作成する場合と同じ方法で、エンティティー・タイプおよび関係タイプを追加、編集、および削除します。

    - タイプ・システムを最初から作成する:

        1. **「エンティティー・タイプ (Entity Types)」**タブで、**「エンティティー・タイプの追加 (Add Entity Type)」**をクリックします。
        1. エンティティー・タイプの記述名を指定します。その際、エンティティー・タイプはドメイン・コンテンツ内の重要なテキスト・スパン (メンション) にアノテーションを付けるためのラベルであることを忘れないでください。 ヒューマン・アノテーターが簡単に覚えられるよう、常に名前は短くて代表的なものにしてください。

            オプションとして、エンティティー・タイプに役割とサブタイプを定義することもできます。
            - 役割は、メンションが出現するコンテキスト内でエンティティー・タイプを限定するのに役立ちます。 例えば、「`Software Engineer` (ソフトウェア・エンジニア)」というメンションには、エンティティー・タイプ `PEOPLE` と、このコンテキストでは役割 `OCCUPATION` をラベル付けすることができます。 詳しくは、『[役割を定義するタイミング](/docs/services/watson-knowledge-studio/typesystem.html#wks_typesystem_roles)』を参照してください。
            - サブタイプは、エンティティー・タイプをさらに分類するのに役立ちます。 例えば、エンティティー・タイプ `GOVERNMENT` (政府) には、`MILITARY` (軍人) と `CIVILIAN` (民間人) のサブタイプを設けることができます。

            > **注:** エンティティーに役割またはサブタイプを定義すると、アノテーション時に、タイプ情報をメンションに関連付けるユーザーに、より多くのオプションを与えることになります。 ヒューマン・アノテーターは、エンティティー・タイプだけを指定するアノテーションを適用することも、エンティティー・タイプのほかに、現在定義しようとしている役割やサブタイプを指定するアノテーションを適用することもできます。

            アノテーションを付けたい主要な概念をキャプチャーするために、十分な数のエンティティー・タイプを定義するようにしてください。ただし、ヒューマン・アノテーターがラベルを厳密に適用するのが煩雑になるほど、多数のエンティティー・タイプを定義してはなりません。

        1. **「メンション・クラス」**および**「メンション・タイプ」**をクリックして、デフォルトのメンション・クラスとメンション・タイプを表示します。 これらの値を編集することはできません。

            属性の目的は、メンションされている「もの」のタイプによって各メンションにラベルを付けやすくすることです。 メンション・タイプは、メンションが固有名詞、普通名詞、または代名詞のいずれであるかを示し、メンション・クラスは、メンションが特定、総称、否定のいずれであるか示します。

        1. **「アセット」**>**「関係タイプ」**ページを開き、2 つのメンションが互いにどのような関係にあるかを指定します。

            関係タイプにおける最初のエンティティーと 2 番目のエンティティーの順序は、通常の場合、関連があります。 例えば、`PERSON` (個人) エンティティーは `ORGANIZATION` (組織) エンティティーまたは地政学的エンティティー (**GPE**) の従業員でありえますが (例えば、「`Mary` `employedBy` `{{site.data.keyword.IBM_notm}}`」)、組織や地政学的エンティティーが人によって雇用されることはありません。 ヒューマン・アノテーターがグランドトゥルース・エディターでエンティティーをクリックすると、使用可能な関係タイプのリストは、タイプ・システム内で定義されているものによって制御されます。

            関係属性は定義しないでください。 それらの属性は機械学習モデルでは使用されません。 このモデルでは、関係タイプと順序だけが使用され、関係属性は無視されます。

        1. **編集**アイコンと**削除**アイコンを使用して、エンティティー・タイプとそれに関連する関係タイプを変更するか、タイプ・システムからエンティティー・タイプまたは関係タイプを削除します。

            関係タイプ定義で使用されているエンティティーを削除すると、その関係タイプ定義も削除されます。

**関連タスク**:

[ヒューマン・アノテーションを失わずにタイプ・システムを変更する](/docs/services/watson-knowledge-studio/improve-ml.html#wks_projtypesysmod)

## タイプ・システム作成のガイドライン
{: #wks_typesys_guidelines}

{{site.data.keyword.knowledgestudioshort}} でのタイプ・システムの目的は、テキスト・スパンにアノテーションを付ける方法を定義することです。 タイプ・システムを最初から作成することを選択した場合は、以下のガイドラインに従ってください。

そのタイプ・システムを使用するアプリケーションに必要な情報を対象として、エンティティー・タイプと関係タイプのインベントリーを作成することに集中してください。 必要でないものを対象としてはなりません。 タイプを分割したり、アプリケーションに必要でない区別を付けたりしないでください。 例えば、ソース文書に「`Murder on the Orient Express made headlines (「オリエント急行の殺人」はトップ・ニュースになった)`」という文章が含まれている場合、この文章内の主要な情報をキャプチャーするためにエンティティー・タイプを定義する方法は、そのタイプ・システムによって構築するモデルを使用するアプリケーションのタイプによって異なります。

- 文学アプリケーションの場合は、次の情報をキャプチャーするタイプを作成できます。

    ```
               [NOVEL][CRITICAL_RECEPTION]
    ```
    {: screen}

    ```
    [Murder on the Orient Express][made headlines]
    ```
    {: screen}

- 治安アプリケーションの場合は、次のようなタイプを作成できます。

    ```
    [EVENT_CRIME][LOCATION]
    ```
    {: screen}

    ```
      [Murder] on the [Orient Express] made headlines
    ```
    {: screen}

構造は多くの場合、情報の抽出元となる文書の特性によって変化しますが、アプリケーションがそれらの文書から実際に使用する情報によって、常に調整する必要があります。 例えば、医療記録から洞察を得るアプリケーションを作成しているとします。 タイプ・システムを構築するには、まず患者記録を見て、どのような種類の情報をキャプチャーする必要があるかを確認します。 患者記録には、そのすべてに、患者が昼食に何を食べたかを記述するフィールドが含まれている場合があります。 しかし、その情報をアプリケーションが使用しない場合は、その情報をタイプ・システムに追加しないでください。 また、この省略を決定する際に、それは患者記録文書のそのセクションにアノテーションが付かなくなるという意味であることを知っておいてください。 それは問題にはならず、むしろ、予期されていることです。

メンションは、テキストのスパンにアノテーションを付けます。そのテキストを置き換えるわけではありません。 タイプ・システムは、ドメインのオントロジーではありません。 医薬タイプごとにエンティティー・タイプを設けるのではなく、`MEDICATION_NAME` (医薬_薬剤名) などの総称のエンティティー・タイプを使用してください。 文書テキストには、引き続き特定の薬剤名が含まれます。 文書テキストは、単にそのタイプを識別するアノテーションによって強化され、プログラムによって情報が見つけやすく抽出しやすくなるだけにすぎません。

始めは、10 個から 40 個のエンティティー・タイプと関係タイプを定義します。 ワークスペースで作業するヒューマン・アノテーターが、その分野に特に詳しい専門家でない場合は、上記の範囲の下限の方に留めてください。 50 個を超えて定義してはなりません。

チームがヒューマン・アノテーション・タスクを開始する前に、タイプ・システムの定義に十分な時間を掛けるように計画してください。 チームが文書へのアノテーション付けを開始する場合は、小さなセット (場合によっては 50 個以下) で始めてください。 最初はメンションだけにアノテーションを付け、結果を検査し、必要に応じてアノテーションのガイドラインとタイプ・システムを詳細化します。 メンションのアノテーションの結果に問題がなければ、関係と同一指示のアノテーション付けに進みます。

一連のエンティティー・タイプとメンション・アノテーションのガイドラインを定義するための基本的な作業が進行中の場合は、関係メンションのアノテーション付けに、あまり深入りしないようにします。 メンションが変更されると、関係のアノテーション作業が取り消しになります。 エンティティー・タイプのインベントリーが最終決定される前に関係タイプのニーズが考慮されるよう、いくらかの時間を掛けて、一連の関係タイプとその許容されるエンティティー・タイプ・ペアを定義してください。

アノテーションを付けようとするユーザーの経験とともに、タイプ・システムが進化することを期待してください。 ヒューマン・アノテーション・タスクを作成した後にタイプ・システムを改訂する場合は、各タスクに変更を適用するかどうかを決定する必要があります。 変更を適用する場合、ヒューマン・アノテーターは前にアノテーションを付けた文書に再度アクセスする必要があります。

モデルをテストするときに、サンプル文書内にエンティティー・タイプおよび関係タイプが出現する頻度を示す統計を検討することができます。 これらの統計を必ず確認してください。 大量の文書の集合に正確にアノテーションを付けるために、アプリケーションが十分なコンテキストを確実に受け取れるようにするには、テスト・データに、最も重要なエンティティー・タイプと関係タイプの大規模なサンプリングが含まれている必要があります。

> **重要:** 最初のモデルをトレーニングした後、パフォーマンス統計に基づいて変更が必要になる場合があります。 ただし、機械アノテーション用に信頼できる統計モデルを作成するためには、大規模アノテーション・タスクを開始する前に、タイプ・システムをできるだけ最終的な状態に近いものにしておく必要があります。

## 役割を定義するタイミング
{: #wks_typesystem_roles}

役割を使用すると、より正確なエンティティー・タイプを定義できます。

追加するすべてのエンティティーには役割があります。 役割名は、変更しない限り、エンティティー名と同じものです。 より微妙なメンションの使用状況をキャプチャーするために、エンティティーに別の役割を定義することを選択できます。 役割が適用される単語や句は、まさにエンティティー・タイプの 1 つの例ですが、文章の中では、別のエンティティー・タイプの役割を演じます。 例えば、英語で「`the White House vetoed the bill (ホワイト・ハウスはその法案に拒否権を行使した)`」という句の中で、`FACILITY` (施設) というエンティティー・タイプと `ORGANIZATION` (組織) または `PERSON` (個人) という役割の両方をアノテーションとして付けた場合、「`White House (ホワイト・ハウス)`」の意味をより厳密にキャプチャーすることができます。 「White House」は建物 (`FACILITY`) ですが、この構文では、政府 (`ORGANIZATION`) または米国大統領 (`PERSON`) を表しています。 このエンティティー・タイプと役割のラベルにより、テキスト内のメンションが、より厳密に分類されます。

役割は、重複する複数のメンションを使用せずに、関係情報をキャプチャーする 1 つの方法としても使用できます。 例えば、「`31-year-old male`」という英文テキストにアノテーションを付けて、これが 31 歳という年齢属性と男性という性別属性を持つ個人への参照であるという考えをキャプチャーできるようにしたいとします。 このテキストを検査することにより、「`31-year-old`」が年齢、「`male`」が性別であり、それらが一緒になって 1 人の個人を表していることが分かります。 ここでは、基本的に 3 のエンティティー・タイプ、`AGE` (年齢)、`GENDER` (性別)、および `PERSON` (個人) が関係しています。 これを表す 1 つの方法は、「`31-year-old`」に `AGE` 、「`male`」に `GENDER` としてのアノテーションを付けることであり、それらとは別の `PERSON` のメンションが欠落していますが、「`male`」は個人を表すことになるので、「`male`」という単語は `PERSON` の役割を持つことができます。 これにより、`PERSON` 役割と、キャプチャーしたい個人のすべての属性との間の関係をキャプチャーできます。 例えば、`PERSON` 役割と `AGE` メンションとの間に `hasAttribute` (～の属性を持つ) という関係を定義できます。 この場合、「`male`」という同じ単語に `GENDER` エンティティー・タイプと `PERSON` 役割タイプ・ラベルを適用したので、この 2 つの間に `hasAttribute` 関係を定義することはできません。 しかし、2 つのラベルが同じメンションに適用されているという事実によって、それらは互いに関連付けられています。 この関連付けは、ユーザーが hasAttribute 関係タイプを定義して明示的に関係を指定しなくても、機械学習モデルによって考慮されます。

同様な例は、「`2008 Ford F-150 (2008 年型フォード F-150)`」という句が「`2008 Ford F-150 truck (2008 年型フォード F-150 トラック)`」の省略表現として使用された場合です。 「`2008`」には `MODEL_YEAR` (モデル_年式) エンティティー・タイプとしてアノテーションが付けられ、「`Ford`」には `MANUFACTURER` (製造メーカー) エンティティー・タイプ、「`F-150`」には `MODEL` (モデル) エンティティー・タイプとしてアノテーションが付けられます。 しかし、「`truck` (トラック)」という単語が欠落していても、「`F-150`」は車両も表しています。 「`the F-150`」ということは、「`the truck`」ということと同様なのです。 その使用状況は、`MODEL` エンティティー・タイプのほかに、`VEHICLE` (車両) 役割をこのメンションに追加することによってキャプチャーできます。 その後、`VEHICLE` 役割と `MANUFACTURER` および `MODEL_YEAR` のエンティティー・メンションとの間に `hasAttribute` 関係を定義できます。

### 役割とサブタイプの相違点

エンティティー・サブタイプは、エンティティー・タイプのインベントリーを階層化するためのものです。 例えば、40 個のものを区別する必要があり、それらが論理上、10 個ずつ 4 つ (`VITALSIGN_BLOODPRESSURE` (バイタル・サイン_血圧)、`VITALSIGN_HEARTRATE` (バイタル・サイン_心拍数)、`MEDICATION_DOSAGE` (医薬_調剤)、`MEDICATION_FREQUENCY` (医薬_投薬頻度)) にグループ化できる場合は、それらをタイプとサブタイプに構造化できます。これにより、よりコンパクトなメニューが生成されますが、ラベル付けプロセスは、深さのレベルが増し、面倒になります。 情報抽出という目的のためには、タイプとサブタイプの組み合わせは、サブタイプがない非常に多くのものと交換可能です。 これに対し、役割を適用する単語や句は 1 つのエンティティー・タイプの例ですが、それらは別のエンティティー・タイプの役割を演じ、一方が他方のサブタイプではありません。

### 役割の取り扱い方法

{{site.data.keyword.knowledgestudioshort}} の機械学習モデルは、ソース文書内で検出したエンティティーの各メンションに対し、エンティティー・タイプと役割の値を連結することによって、その種別ラベルを定義します。役割値を指定すると、さらに厳密なラベルが作成されます。 トレーニング・データから検出された 1 つのラベル・タイプの各インスタンス・グループは、より均一なメンション・セットを形成します。 問題は、より厳密にすることを選択した場合は、モデルの十分なパフォーマンスを確保するために、より多くのトレーニング・データの提供も必要になることです。 しかし、提供するトレーニング・データが多いほど、モデルは良くなります。 したがって、追加のアノテーションを行うことが苦にならない場合は、役割を使用すれば、より良い結果が得られます。

例として、ソース文書内に以下のような英語の文章があり、`Acme` (`Acme` は既知のトラック製造メーカー)、`sedan` (セダン)、`truck` (トラック) を類似したエンティティーとしてキャプチャーしたいと想定します。それらは、どれも物理的な車両を指しているためです。

- a) `The Acme crashed into the concrete barrier.` (Acme がコンクリートの障壁に衝突した。)
- b) `The sedan crashed into the concrete barrier.` (セダンがコンクリートの障壁に衝突した。)
- c) `The Acme A-160 truck crashed into the concrete barrier.` (Acme A-160 トラックがコンクリートの障壁に衝突した。)

この場合、タイプ・システムの設計を次の 2 つの方法で処理できます。

1. 2 つのエンティティー・タイプ、`MANUFACTURER (製造メーカー)` と `VEHICLE (車両)` を定義します。 `MANUFACTURER` エンティティーに対し、デフォルトの `MANUFACTURER` 役割に加えて使用できる `VEHICLE` 役割を定義します。

    このタイプ・システムを使用すると、各文章に付けるアノテーションは以下のようになります。
    - a) 「`Acme`」には `MANUFACTURER` エンティティーのアノテーションが付きますが、役割は `VEHICLE` になります。これは実際の車両を指しているためです。 したがって、その内部ラベルは `MANUFACTURER-VEHICLE` です。
    - b) 「`sedan`」には、エンティティー・タイプ `VEHICLE` のアノテーションが付きます。 これは、他の役割が定義されていないため、自動的に `VEHICLE` 役割に割り当てられます。
    - c) 「`Acme`」にはエンティティー・タイプ `MANUFACTURER` のアノテーションが付き、「`truck`」にはエンティティー・タイプ `VEHICLE` のアノテーションが付きます。 役割は割り当てられていないため、デフォルトの役割が使用されます。

1. 役割を使用せず、2 つのエンティティー・タイプ `MANUFACTURER` および `VEHICLE` だけを定義します。

    このタイプ・システムを使用すると、各文章に付けるアノテーションは以下のようになります。
    - a) 「`Acme`」には、エンティティー・タイプ `VEHICLE` のアノテーションが付きます。
    - b) 「`sedan`」には、エンティティー・タイプ `VEHICLE` のアノテーションが付きます。
    - c) 「`Acme`」にはエンティティー・タイプ `MANUFACTURER` のアノテーションが付き、「`truck`」にはエンティティー・タイプ `VEHICLE` のアノテーションが付きます。

2 つの異なるタイプ・システムは、どのようなパフォーマンスを示すでしょうか。 ある文書セットに複数のヒューマン・アノテーターがアノテーションを付けたとします。 アノテーションを通過した後、トレーニング・コーパス内で以下のトレーニング・イベント (手動でラベル付けされたエンティティー) が識別されます。

- **タイプ・システム 1**

    ```
    MANUFACTURER-MANUFACTURER 800 イベント
    MANUFACTURER-VEHICLE 200 イベント
    VEHICLE-VEHICLE 400 イベント
    ```
    {: screen}

- **タイプ・システム 2**

    ```
    MANUFACTURER 800 イベント
    VEHICLE 200 + 400 = 600 イベント
    ```
    {: screen}

このモデルで新規文書を処理すると、ほとんどの場合、「`Acme`」に `MANUFACTURER` のラベルが付きます。単語のスペルは強力な特性であるからです。高い確率で「`Acme`」という単語は `MANUFACTURER` 辞書内に定義されるでしょう。 これに異なるラベルを付けるには、多数のコンテキストが必要になると思われます。 タイプ・システム 1 を使用した場合、`MANUFACTURER-VEHICLE` トレーニング・イベントは 200 個しかありません。このことは、タイプ・システム 2 での `VEHICLE` の 600 イベントと比べて不利です。しかし、タイプ・システム 1 のトレーニング・イベント・クラスターは、どれもかなり均一であり、パフォーマンスの向上につながります。 タイプ・システム 2 の場合、`VEHICLE` の 600 個のトレーニング・イベントの集合は、実際には、かなりまとまりのない 2 つのクラスターから構成されています。一方には「`Acme`」や「`Ford`」など、実際の車両を参照する製造メーカー名が含まれており、もう一方には、「`sedan`」、「`SUV`」、「`truck`」などの車両タイプが含まれています。 直感的には、これら 2 つのクラスター自体は、それぞれ均一ですが、混在させるとトレーニング・クラスターを弱体化し、解決するのが難しい問題を提起します。 アノテーションの実行とトレーニング・イベントの追加を繰り返し行うと、タイプ・システム 1 のパフォーマンスは良くなって行くのに対し、タイプ・システム 2 で生じる 2 つのまとまりのないクラスターを解決する問題は、トレーニングを増やしても改善されません。
