---

copyright:
  years: 2015, 2018
lastupdated: "2018-07-20"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:tip: .tip}
{:pre: .pre}
{:codeblock: .codeblock}
{:screen: .screen}
{:javascript: .ph data-hd-programlang='javascript'}
{:java: .ph data-hd-programlang='java'}
{:python: .ph data-hd-programlang='python'}
{:swift: .ph data-hd-programlang='swift'}

この文書は、{{site.data.keyword.cloud}} 上の {{site.data.keyword.knowledgestudiofull}} に関するものです。 前のバージョンの {{site.data.keyword.IBM_notm}} マーケットプレイス上の {{site.data.keyword.knowledgestudioshort}} に関する文書を参照するには、[このリンクをクリックしてください ![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](https://console.bluemix.net/docs/services/knowledge-studio/backup-restore.html){: new_window}。
{: tip}

# データのバックアップおよびリストア
{: #backup-restore}

{{site.data.keyword.knowledgestudioshort}} のワークスペースをバックアップおよびリストアする必要がある場合、以下の作業を実行します。 また、ある {{site.data.keyword.knowledgestudioshort}} インスタンスから別のインスタンスへの手動でのデータ・マイグレーションを行う必要がある場合、例えば、{{site.data.keyword.IBM_notm}} マーケットプレイスにあるインスタンスから {{site.data.keyword.cloud_notm}} にあるインスタンスへのマイグレーションを行う場合も、以下の作業を実行します。
{: shortdesc}

_手動でのデータ・マイグレーション_ は、あるインスタンスからデータをバックアップし、それを別のインスタンスにリストアする処理です。

**注:** {{site.data.keyword.cloud_notm}} 上の {{site.data.keyword.knowledgestudioshort}} では_ワークスペース_ という用語が使われていますが、{{site.data.keyword.IBM_notm}} マーケットプレイス上の {{site.data.keyword.knowledgestudioshort}} では_プロジェクト_ という用語が使われています。 機能は同じです。 用語が違うだけです。

データをバックアップしてリストアするには、以下のステップを実行します。

1. [バックアップできるデータを理解する](#data)
1. [バックアップの準備を行う](#prepare)
1. [現行インスタンスから成果物をダウンロードする](#export)
1. [新規インスタンスにワークスペースを再作成する](#recreateproj)
1. [ワークスペース・データをリストアする](#restoredata)
1. [モデルをリストアする](#restoremodels)
1. [未完了のアノテーション・タスクをリストアする](#restoretasks)

## バックアップ可能なデータ
{: #data}

以下の成果物は、手動でバックアップおよびマイグレーションできます。

- 編集可能辞書
- タイプ・システム
- 承認済みのグランド・トゥルース文書セット

以下のタイプの成果物は、手動でバックアップおよびマイグレーションすることはできません。

- 進行中のヒューマン・アノテーション文書
- アノテーション・タスク
- モデルおよびスナップショット
- 読み取り専用辞書

## バックアップの準備
{: #prepare}

データのバックアップとリストアの準備をするには、以下のステップを実行します。

1. ワークスペースで進行中の作業をすべて完了します。

    - **重要:** 進行中のすべてのアノテーション・タスクを終了してください。 バックアップできるのは、アノテーションを付けられ、裁定され、承認され、グランド・トゥルースにプロモートされた文書のみです。 アノテーション作業を終了しないと、進行中だが完全には終わっていないアノテーション作業はすべて失われます。

    - 実行したい作業を追跡するためにアノテーション・タスクを作成したが、それらのアノテーション作業のどれも始まっておらず、ワークスペースがリストアされるまではどれも実行されない場合、未処理アノテーション・タスクのリストを作成してください。 インポートしたが、グランド・トゥルースにはまだ追加されていない文書セットを必ずメモしてください。 また、各文書セットにアノテーションを付ける作業を誰に割り当てたのかもメモしてください。 ワークスペースがリストアされた後、これらの文書セットを再アップロードし、アノテーション・タスクを再作成することが必要になります。

1. トークナイザーの使用を理解します。

    機械学習モデルの場合、ワークスペースがデフォルトで使用するのは機械学習ベースのトークナイザーです。 辞書ベースのトークナイザーを使用していて、それを使い続ける明確なニーズがある場合は、ワークスペースのリストア時に、辞書ベースのトークナイザーを使用するように構成できます。 詳しくは、『[トークナイザー](/docs/services/watson-knowledge-studio/create-project.html#wks_tokenizer)』を参照してください。

1. モデル・リソースを管理します。

    モデルおよびモデルの別バージョン、およびスナップショット・データをマイグレーションすることはできません。 それらの成果物のトレーニングに使用したリソース (読み取り専用辞書を除く) はマイグレーションできます。 したがって、マイグレーション後にモデルを再作成できます。 同じリソースがトレーニングに使用されることになるため、作成されるモデルはマイグレーション前に生成したモデルと同じことを実行するようになります。

    **重要:** 既にデプロイ済みのモデルがあり、バックアップしてからワークスペースを削除する予定の場合、そのモデルをアンデプロイしてください。 ワークスペースをバックアップからリストアした後に、そのモデルを再作成し、再デプロイすることができます。 モデルのアンデプロイについて詳しくは、『[機械学習モデルのアンデプロイ](/docs/services/watson-knowledge-studio/publish-ml.html#undeploy-view-model)』および『[ルール・ベース・モデルのアンデプロイ](/docs/services/watson-knowledge-studio/rule-annotator-model-use.html#undeploy-view-model)』を参照してください。

    **モデルのアンデプロイを行わないと、_オーファン_ 状態のデプロイ済みモデルがあるという結果になります。 オーファン状態のデプロイ済みモデルは、月次請求書での課金の対象のままになります。**

1. 読み取り専用辞書についての情報を管理します。

    読み取り専用辞書をマイグレーションすることはできません。 マイグレーション後にワークスペースに再アップロードできるように、読み取り専用辞書がどこからインポートされたのかを調べておいてください。

1. 現行のユーザー役割のリストを作成します。

    **注:** このステップはオプションです。 通常、これが実行されるのは、ワークスペースがインスタンス間でマイグレーションされ、新規ワークスペースが元のワークスペースと同じでなければならない場合です。 ワークスペース・データのみを新規ワークスペースにマイグレーションする場合は、このステップをスキップできます。

    異なるインスタンス間でワークスペースをマイグレーションする場合は、バックアップするインスタンスのユーザーとそれぞれの役割のリストを作成することを検討してください。 管理者役割を持っているユーザーは「ユーザー・アカウント管理 (User Account Management)」ページからそのリストを印刷できます。 新規インスタンスでワークスペースが再作成された後、管理者役割を持つ任意のユーザーが、それらのユーザーを追加し、それぞれの役割を割り当てる必要があります。

    役割について詳しくは、[{{site.data.keyword.knowledgestudioshort}} のユーザー役割](/docs/services/watson-knowledge-studio/roles.html)を参照してください。

1. ワークスペース情報をメモします。

    現行インスタンスにまだアクセスできている間に、マイグレーションしたい各ワークスペースについて以下の情報をメモします。
    - ワークスペースの名前
    - ワークスペースの説明
    - ワークスペースの所有者
    - 言語
    - 未完了のアノテーション・タスクがある場合、それらはバックアップもマイグレーションもできないため、ワークスペース内の未完了タスクに割り当てられているヒューマン・アノテーターをメモします。 また、それらのアノテーション・タスクの詳細 (タスク名、期限、どの文書セットがどのユーザーに割り当てられているかなど) もメモしてください。

## 成果物のダウンロード
{: #export}

マイグレーションしたいワークスペースごとに、以下の成果物をダウンロードします。 後で新しいインスタンスにアップロードできるように、それらを安全な場所に保管します。

- タイプ・システム
- 辞書

  **注**:
    - 編集可能辞書のみがダウンロードされます。 読み取り専用辞書をダウンロードすることはできません。
    - 辞書の場合、エンティティー・タイプ・マッピングはマイグレーションされません。これらの成果物をリストアした後、必要に応じて辞書をエンティティー・タイプにマップする必要があります。

- 文書

  新規ワークスペースにインポートできるように、これらの成果物をダウンロードする方法については、『[別のワークスペースからのリソースのアップロード](/docs/services/watson-knowledge-studio/exportimport.html)』を参照してください。

## ワークスペースの再作成
{: #recreateproj}

**注:** このステップで、元の (ダウンロードされた) ワークスペースの設定と一致しなければならない唯一の設定は言語です。 残りの設定は、元のワークスペースの設定と異なっていてもかまいません。

以下の情報を前のインスタンスから新しいインスタンスにコピーすることによって、各ワークスペースを再作成します。

- ワークスペースの名前
- ワークスペースの説明
- 文書の言語 (この設定は元のワークスペースの設定と一致している必要があります)
- 以前にワークスペースで辞書ベースのトークナイザーを使用していて、正当な必要性があってそれを使用し続ける場合は、ワークスペースの作成時に、デフォルト・トークナイザーの代わりに辞書ベースのトークナイザーを使用することを指定する必要があります。 これらのオプションについて詳しくは、『[トークナイザー](/docs/services/watson-knowledge-studio/create-project.html#wks_tokenizer)』を参照してください。

  辞書ベースのトークナイザーを使用するには、「ワークスペースの作成 (Create Workspace)」ウィンドウの「詳細オプション (Advanced Options)」セクションを展開し ({{site.data.keyword.IBM_notm}} マーケットプレイスでは「ワークスペースの作成 (Create Workspace)」ウィンドウで)、トークナイザー設定を変更します。

## ワークスペース・データのリストア
{: #restoredata}

ワークスペースを再作成した後、前にダウンロードした成果物をアップロードします。

1. 前に作成したタイム・システム・バックアップからタイプ・システムをアップロードします。
   詳しくは、『[別のワークスペースからのリソースのアップロード](/docs/services/watson-knowledge-studio/exportimport.html)』を参照してください。

  **注:** タイプ・システムをアップロードした後でないと、バックアップしたワークスペースから移動する他の成果物をアップロードすることはできません。

1. 前に作成した辞書バックアップから辞書をアップロードします。
   詳しくは、『[別のワークスペースからのリソースのアップロード](/docs/services/watson-knowledge-studio/exportimport.html)』を参照してください。

  前のバージョンのワークスペースで読み取り専用辞書を使用していた場合は、元のソースからこのワークスペースにそれらを再アップロードします。

1. 辞書事前アノテーターの場合、辞書をエンティティー・タイプに関連付けます。エンティティー・タイプのためのマッピングがない辞書では、文書に事前アノテーション付けを行うときにアノテーションが適用されません。

1. 前のバージョンのワークスペースからダウンロードした文書を、このバージョンのワークスペースにアップロードします。
   詳しくは、『[別のワークスペースからのリソースのアップロード](/docs/services/watson-knowledge-studio/exportimport.html)』を参照してください。

## モデルのリストア
{: #restoremodels}

この時点で、前の (バックアップされた) バージョンのワークスペースでモデルのトレーニングに使用されたすべての成果物が、この新規インスタンスで使用可能になります。

前のインスタンスでデプロイした機械学習モデルを再デプロイするには、以下のステップを実行します。

1. [機械学習モデルをトレーニングします](/docs/services/watson-knowledge-studio/train-ml.html)。

  **注:** このワークスペースにマイグレーションしたアノテーション付きの文書に対しては、プレアノテーターを実行しないでください。それを行うと、ヒューマン・アノテーターが追加したアノテーションが失われることになります。

1. モデルを作成した後、それを再度デプロイします。 詳しくは、『[機械学習モデルの使用](/docs/services/watson-knowledge-studio/publish-ml.html)』を参照してください。

前のインスタンスでデプロイしたルール・ベース・モデルを再デプロイするには、以下のステップを実行します。

1. [ルール・ベース・モデルを作成](/docs/services/watson-knowledge-studio/rule-annotator-model-create.html)します。
1. [ルール・ベース・モデルをデプロイ](/docs/services/watson-knowledge-studio/rule-annotator-model-use.html)します。

## 未完了のアノテーション・タスクのリストア
{: #restoretasks}

前のワークスペースで作成されたが完了していないアノテーション・タスクがある場合は、未完了のアノテーション・タスクを再作成するため、以下のステップを実行します。

1. まだアノテーションが付けられていないが、モデルを改善し続けるためにグランド・トゥルースに追加したい[文書をすべてアップロード](/docs/services/watson-knowledge-studio/documents-for-annotation.html#wks_projadd)します。
1. 新しくインポートされ、アノテーションが付けられていない文書から、[アノテーション・セットを作成します](/docs/services/watson-knowledge-studio/documents-for-annotation.html#wks_projdocsets)。
1. [アノテーション・タスクを再作成します](/docs/services/watson-knowledge-studio/annotate-documents.html#wks_hatask)。 タスクに同じ名前と適切な期限を指定し、適切なヒューマン・アノテーターにアノテーション・セットを割り当てます。
